---
title: 正则表达式
date: {{ date }}
tags: regex
categories:
comments: true
---


#### 概述

#### re模块操作
1. re模块的使用过程
```
# 导入re模块
import re

# 使用match方法进行匹配操作
# re.match(正则表达式，要匹配的字符串)
result = re.match(r"[Hh]ello", "hello world")

# 如果上一步匹配到数据的话，可以使用group方法来提取数据
result.group()

result = re.match(r"[Hh]ello", "hello world").group()   # 匹配后直接提取数据
```
2. re模块示例
```
#coding=utf-8

import re
result = re.match("itcast", "itcast.cn")
result.group()
```
#### 匹配单个字符
字符|功能|示例
---|---|---
.  | 匹配任意1个字符(**除了\n**)
[] | 匹配[]中列举的字符 | [1-8] 匹配1到8；[16] 匹配1或6；[1-36-8] 匹配1到3 6到8
\d | 匹配一位数字，即0-9
\D | 匹配非数字，即不是数字
\s | 匹配空白，即空格，tab键
\S | 匹配非空白
\w | 匹配单词字符，即a-z、A-Z、0-9、_、各类语言字符。。。
\W | 匹配非单词字符

#### 匹配多个字符
字符|功能
---|---
*  | 匹配前一个字符出现0次或无限次，即可有可无
+  | 匹配前一个字符出现1次或无限次，即至少1次
?  | 匹配前一个字符出现0次或1次，即要么没有，要么有1次
{m}| 匹配前一个字符出现m次
{m, n}| 匹配前一个字符出现从m到n次

```
# 匹配\d 1到3次
re.match(r"速度与激情\d{1，3}", "速度与激情3").group()

# 匹配连续十一位数字
re.match(r"\d{11}", "12345678901").group()

# 匹配手机号
re.match(r"\d{3,4}-?\d{7,8}","0310-3328839").group()

# 匹配'\n'
re.match(r".*", html_content, re.S).group()
```

#### 匹配开头结尾

字符|功能
---|---
^   |   匹配字符串开头
$   |   匹配字符串结尾

#### 匹配分组
字符|功能
---|---
|           |   匹配左右任意一个表达式
(ab)        |   将括号中字符作为一个分组
\num        |   引用分组num匹配到的字符串
(?P<name>)  |   分组起别名
(?P=name)   |   引用别名为name分组匹配到的字符串
```
re.match(r"([a-zA-Z0-9_]{4,20})@(163|126)\.com$","day@163.com").group(1)
--> 'day'
re.match(r"([a-zA-Z0-9_]{4,20})@(163|126)\.com$","day@163.com").group(2)
--> '163'
```

**示例**
```
re.match(r"<(\w*)>.*</\1>","<h1>hahaha</h1>").group()

re.match(r"<(\w*)><(\w*)>.*</\2></\1>","<body><h1>hahaha</h1><body>").group()

re.match(r"<(?P<p1>\w*)>.*</?P=p1>","<h1>hahaha</h1>").group()

```

#### re模块的高级用法
**search**
1. search不从头开始匹配，只要匹配到相应值就结束
2. match默认从头开始匹配
```
import re

ret = re.search(r"\d+","阅读次数为9999")
ret.group()
--> '9999'
```
**findall**
findall从头开始匹配，提取所有符合要求的字符串
需求：统计出Python、C、C++相应文章阅读的次数
```
import re

ret = re.findall(r"\d+","python = 9999, c = 7890, c++ = 12345")
print(ret)
-->['9999', '7890', '12345']
```

**sub**
将匹配到的数据进行**替换**
需求：将匹配到的阅读次数加1
```
import re

def add(temp):
    strNum = temp.group()
    num = int(strNum) + 1
    return str(num)

ret = re.sub(r"\d+", add, 'python = 997 c++ = 900')
print(ret)
--> 'python = 998 c++ = 901'
```

**split**
根据匹配进行切割字符串，并返回一个列表
需求：切割字符串“info:xiaoZhang 33 shandong”
```
import re

ret = re.split(r":| ", "info:xiaoZhang 33 shandong")
print(ret)
--> ['info', 'xiaoZhang', '33', 'shandong']
```

#### 贪婪和非贪婪

#### r的作用