---
title: 安装黑苹果记录
date: {{ date }}
tags: hackintosh
categories:
comments: true
---


### 硬件平台：XiaoMi Air12.5 m3-6y30 4G+128G

#### 完整备份win10系统

建议使用win10系统自带备份功能。

##### 恢复win10系统

安装黑苹果会格掉整个盘，所以恢复时在U盘PE下使用系统镜像的install.wim软件左下角的恢复系统功能来进行恢复。

#### 准备文件

1. 系统镜像         [mirror](https://blog.daliansky.net/macOS-Mojave-10.14.4-18E226-official-version-with-Clover-4903-original-image.html)
2. 刻盘软件etcher   [etcher](https://www.balena.io/etcher/)
3. 专用EFI          [EFI](https://github.com/johnnync13/EFI-Xiaomi-Notebook-air-12-5.git)
4. win10备份U盘，16G以上
5. 黑苹果系统U盘，8G以上

#### 制作安装镜像

1. 格式化U盘
2. 打开etcher软件
3. 傻瓜式操作

#### 替换EFI

因为镜像自带的EFI不兼容air12.5，所以我们要手动替换为专用EFI

win10磁盘管理工具可以进入U盘的EFI分区，将专用EFI中的EFI目录替换进U盘EFI分区中

#### 小米BIOS设置

##### 升级BIOS版本至A05
A04版本的BIOS有关机不断掉的Bug，所以我们需要更新BIOS至A05

下载链接: [BIOS-A05](http://bbs.xiaomi.cn/t-13100333)

按照帖子描述一键刷入即可。

##### 设置BIOS
关闭Secure Boot模式，不然无法引导至macOS。

1. 开机按F2进BIOS
2. Security -> Set Supervisor Password -> Installed  # 不设置密码不能关闭
3. Securt Boot Mode -> Disabled

> 开机按F12进入Boot Manager，设置从U盘启动。

#### 安装黑苹果

首先进入Clover界面，Clover是一个黑苹果引导工具，因为macOS不支持非苹果机运行，所以我们要通过第三方工具来修正一系列底层参数，以正确的在非苹果机上引导macOS，该程序就是Clover

1. 屏幕亮起，进入Clover
2. 选择 Boot OS X Install from XiaoMi
3. 拷贝镜像到磁盘。。。。。。。。。

进入macOS恢复模式，开始安装
1. 选择语言

抹掉硬盘，确保你已经将所有的重要数据正确的备份到其他存储介质上。

1. 选中macOS实用工具 -> 磁盘工具 -> 左上角选项-显示所有设备
6. 选择本地磁盘SSD Media -> 上方功能栏-抹掉
7. 选择默认的Mac OS扩展(日志型)  rename-->Macintosh HD  -> 抹掉
8. 退出磁盘工具

真正开始安装macOS

1. 安装macOS
2. 进入安装界面
3. 开始安装

#### 安装第二阶段

等。。。。。。

#### 设置向导

略

#### 替换EFI

因为EFI分区此时还在U盘上，所以我们需要将EFI文件拷贝到本地磁盘的EFI分区上

1.挂载EFI分区

打开终端，输入以下命令

```
$ diskutil list                # 查看磁盘分区表
$ diskutil mount disk0s1        # 挂载磁盘FEI分区
$ diskutil mount disk1s1        # 挂载U盘EFI分区
$ find .                      # 打开Finder，进行替换操作
```

2. 合并EFI

纯净安装macOS，没有Win10系统的EFI，不需要合并，此步省略

3. 替换EFI

将U盘EFI分区下的EFI目录复制到磁盘EFI分区下

#### 完善网卡驱动

Mac本身不支持小米自带的网卡型号，无解，扩展槽无法添加WIFI无线网卡，只能选择外置USB网卡。

或者使用USB网络共享暂时上网 [HoRNDIS](https://github.com/jwise/HoRNDIS/releases)，下载安装即可。

USB连接手机，手机上打开热点，即可上网。

#### 开启HiDPI

1080P分辨率在12寸的屏幕上显示的字体特别小，所以有了开启HiDPI的需求

教程链接 [开启HiDPI](https://zhih.me/one-key-hidpi/)
脚本下载链接 [下载HiDPI](https://github.com/xzhih/one-key-hidpi.git)

#### GitHub访问加速

域名的IP地址在 https://www.ipaddress.com 查询
```
$ sudo vim /etc/hosts
# github
192.30.253.112 GitHub.com
185.199.108.153 assets-cdn.github.com
151.101.185.194 github.global.ssl.fastly.net
```

感谢提供专用EFI的作者[johnnync13](https://github.com/johnnync13/)
感谢提供思路的[etrock](http://bbs.xiaomi.cn/t-36526099)
感谢提供镜像的作者[黑果小兵](https://blog.daliansky.net)